{%  extends 'base.html'  %}
{%  block content  %}

<!-- Prepare all future AJAX with CSRF token -->
<script type="text/javascript">
    var csrf_token = "{{ csrf_token() }}";

    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrf_token);
            }
        }
    });
</script>


<div class="content">

<div>
<h2>User {{user.name}} Profile Page</h2>
{% if current_user.id == user.id  %}

<div>
<a href="/users/{{user.id}}/edit">Edit</a>


<button type="button" class="btn btn-primary" data-toggle="modal" 
 data-target="#invite-modal">Invite New User</button>

<!-- Invite User Modal with AJAX -->
<div id="invite-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
              <button label="close" id="close-button" type="button" class="close" data-dismiss="modal">&times;</button>
            <div class="model-header">
                <h4 class="modal-heading">Invite New User</h4>
            </div>
        <div class="modal-body text-center">
            <form  action="#">
                <div class="form-group">
                    <input id="invite-name" label="Name" name="name" type="text" placeholder="Name"></input>
                    <input id="invite-email" label="Email" name="email" type="text" placeholder="Email Address"></input>
                    <button label= "submit" class="btn btn-primary" id="invite-modal-submit">Submit</button>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <div id="modal-message" class="text-center"></div>
        </div>
        </div>
    </div>
</div>

<p>Name: {{user.name}}</p>
<p>Email: {{user.email}}</p>
<p>Phone: {{user.phone}}</p>
<p>Created: {{user.created_at}}</p>
<p>Updated: {{user.updated_at}}</p>
<p>Admin: {{user.is_admin}}</p>
<p>Confirmed: {{user.confirmed}}</p>

<button class="btn btn-primary" ><a href="/users/{{user.id}}/editpassword" style="color:white">Update Password</a></button>
<div>


</div>
<div class="searchcontent">
    <div class="myheader">
        <div class="myheadertext">Search</div>
        <div class="myheaderbar"></div>
      <div class="mycontent">
      </div>
  </div>
</div>


{% else %}

<div>
<div id='invite-modal' class='modal fade' role='dialog'>
    <div>
    </div>
</div>

<p>Name: {{user.name}}</p>
<p>Email: {{user.email}}</p>
<p>Phone: {{user.phone}}</p>
<p>Created: {{user.created_at}}</p>
<p>Updated: {{user.updated_at}}</p>
<p>Admin: {{user.is_admin}}</p>
<p>Confirmed: {{user.confirmed}}</p>
<div>
{% endif %}
{%  endblock  %}
